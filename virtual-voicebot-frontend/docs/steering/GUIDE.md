# ステアリング運用ガイド（Frontend）

> ステアリング（差分仕様）の作成・運用に関する実践ガイド

| 項目 | 値 |
|------|-----|
| ステータス | Active |
| 作成日 | 2026-02-05 |
| 関連 | [v-model.md §5](../process/v-model.md) |

---

## 1. いつステアリングを作るか（トリガー）

### 1.1 必須（MUST）

| トリガー | 例 |
|---------|-----|
| **ページ追加・削除** | 新規ページ、ルーティング変更 |
| **複数コンポーネント（3+）に影響** | レイアウト変更、共通コンポーネント修正 |
| **API Route の追加・変更** | エンドポイント追加、リクエスト/レスポンス変更 |
| **DB スキーマ変更** | Prisma モデル追加・変更 |
| **状態管理方針の変更** | Store 構造変更、新たな状態管理ライブラリ導入 |

### 1.2 推奨（SHOULD）

| トリガー | 例 |
|---------|-----|
| **設計判断が必要** | 複数の UI パターンから選択 |
| **Backend との I/F 変更** | contract.md の変更に伴う対応 |
| **段階的実装** | Phase 分けが必要な機能 |

### 1.3 不要（MAY SKIP）

| ケース | 理由 |
|--------|------|
| スタイル修正（CSS/Tailwind のみ） | 仕様変更なし |
| 依存ライブラリ更新（minor） | 影響が限定的 |
| ドキュメント修正のみ | コード変更なし |

---

## 2. ID 採番ルール

### 2.1 基本ルール

```
STEER-{イシュー番号}_{slug}.md
```

| 項目 | ルール |
|------|--------|
| イシュー番号 | GitHub Issue の番号を使用 |
| slug | 英小文字、ハイフン区切り、内容を表す短い名前 |

### 2.2 例

| Issue 状況 | ステアリング ID |
|-----------|----------------|
| Issue #107 で対応 | `STEER-107_frontend-docs-structure.md` |
| Issue #110 で対応 | `STEER-110_call-detail-page.md` |

### 2.3 index.md 必須カラム

| カラム | 必須 | 説明 |
|--------|------|------|
| ID | 必須 | `[STEER-xxx](ファイル名.md)` 形式のリンク |
| タイトル | 必須 | 簡潔な変更名称 |
| ステータス | 必須 | Draft / Review / Approved / Merged |
| 関連Issue | 必須 | `#xxx` 形式 |
| 優先度 | 推奨 | P0 / P1 / P2 |
| 概要 | 推奨 | 1行で変更内容を要約 |

---

## 3. 作成手順（チェックリスト）

### 3.0 前提条件（ガードレール）

| 条件 | 確認方法 | NG時の対応 |
|------|---------|-----------|
| GitHub Issue が存在する | Issue 番号を確認 | Issue を先に作成 |
| 作業ブランチが切られている | `git branch --show-current` | ブランチを作成 |

**ブランチ命名規則**:

```
feat/{issue番号}-{slug}
fix/{issue番号}-{slug}
docs/{issue番号}-{slug}

例:
- feat/110-call-detail-page
- fix/112-filter-bug
- docs/107-frontend-docs-structure
```

> `main` / `develop` / `master` ブランチで作業を開始してはいけない。

### 3.1 起票フェーズ

- [ ] GitHub Issue が存在する
- [ ] Issue に要件・背景が記載されている
- [ ] 作業ブランチが作成・チェックアウト済み

### 3.2 作成フェーズ

```bash
# 1. テンプレートをコピー
cp docs/steering/TEMPLATE.md docs/steering/STEER-107_example.md

# 2. メタ情報を埋める
# 3. ストーリー（Why/Who/When）を記述
# 4. 差分仕様（What/How）を記述
```

- [ ] テンプレートからファイル作成
- [ ] メタ情報を記入
- [ ] ストーリー（背景・目的）を記述
- [ ] 段取り（起票者・作成者）を記入
- [ ] 影響範囲を特定
- [ ] 差分仕様を記述
- [ ] index.md に追加

### 3.3 レビュー → 承認フェーズ

- [ ] ステータスを `Review` → `Approved` に変更
- [ ] レビュアー・承認者を記入

---

## 4. ステータス遷移条件

### 4.1 ステータス定義

| ステータス | 意味 |
|-----------|------|
| **Draft** | 作成中 |
| **Review** | レビュー中 |
| **Approved** | 仕様確定、実装可能 |
| **Merged** | 本体仕様書へ反映完了 |

### 4.2 遷移フロー

```
Draft → Review → Approved → Merged
```

### 4.3 滞留時ルール（SLA）

| 状況 | 対応 |
|------|------|
| Review で 3 営業日反応なし | リマインド |
| Review で 5 営業日反応なし | エスカレーション |

---

## 5. AI エージェントの役割分担

| フェーズ | Claude Code | Codex | CodeRabbit | 人間 |
|---------|-------------|-------|------------|------|
| ステアリング作成 | **主担当** | - | - | 指示・レビュー |
| 仕様レビュー | 矛盾検出 | 実装観点 | - | 承認 |
| 実装 | - | **主担当** | - | 指示 |
| コードレビュー | - | - | **主担当** | 確認 |
| 本体仕様書マージ | **主担当** | - | - | 確認 |

### 引き継ぎ方法

**Claude Code → Codex（実装依頼）**:

```markdown
## Codex への引き継ぎ

ステアリング [STEER-xxx](docs/steering/STEER-xxx_yyy.md) に基づき実装してください。

Refs #xxx
```

---

## 6. 本体仕様書へのマージ方法

### 6.1 マージ対象

| ステアリング内容 | マージ先 |
|-----------------|---------|
| 要件の追加・変更 | RD-xxx |
| 基本設計の追加・変更 | BD-xxx |
| 詳細設計の追加・変更 | DD-xxx |
| テスト仕様の追加・変更 | UT-xxx / ST-xxx |

### 6.2 マージ方法

1. 差分コピー: ステアリングの該当セクションを本体にコピー
2. 参照追加: 本体に出典を記載
3. ステアリング更新: ステータスを `Merged` に変更
4. index.md 更新

### 6.3 マージ後のステアリング

- 削除しない（履歴として保持）
- ステータスを `Merged` に変更

---

## 7. よくある質問（FAQ）

### Q1: 小さな変更でもステアリングが必要？

§1.3 の「不要」条件に該当すればスキップ可。迷ったら作成を推奨。

### Q2: 途中で仕様が変わったら？

ステアリングを更新し、変更履歴に記録。

### Q3: Backend のステアリングと Frontend のステアリングが同じ Issue に紐づく場合は？

それぞれのディレクトリに別々のステアリングを作成。相互参照を記載。

---

## 8. 参照

| ドキュメント | 内容 |
|-------------|------|
| [v-model.md §5](../process/v-model.md) | ステアリング運用フロー |
| [TEMPLATE.md](TEMPLATE.md) | ステアリングテンプレート |
| [index.md](index.md) | ステアリング一覧 |
| [CLAUDE.md](../../../CLAUDE.md) | Claude Code の役割定義 |
| [Backend GUIDE.md](../../virtual-voicebot-backend/docs/steering/GUIDE.md) | Backend 版（参考） |

---

## 変更履歴

| 日付 | バージョン | 変更内容 | 作成者 |
|------|-----------|---------|--------|
| 2026-02-05 | 1.0 | 初版作成（Backend GUIDE.md をベースに Frontend 向けに調整） | Claude Code |
