# テスト計画書（Frontend）

> Virtual Voicebot Frontend のテスト戦略・計画を定義する

| 項目 | 値 |
|------|-----|
| ステータス | Draft |
| 作成日 | 2026-02-05 |
| 関連Issue | #107 |

---

## 1. テスト戦略

### 1.1 テストレベル

| レベル | 目的 | ツール | 対応仕様 |
|--------|------|--------|---------|
| 単体テスト（UT） | コンポーネント/Hook/関数が正しく動くか | Vitest + React Testing Library | DD |
| 結合テスト（IT） | コンポーネント間連携・データフローが正しいか | Vitest + MSW | BD |
| システムテスト（ST） | 要件を満たすか（E2E） | Playwright | RD |

### 1.2 テストピラミッド

```
        /  ST  \          少数・高コスト
       /--------\
      /    IT    \        中程度
     /------------\
    /      UT      \      多数・低コスト
   /================\
```

---

## 2. テスト対象

### 2.1 単体テスト対象

| 対象種別 | 例 | テスト観点 |
|---------|-----|-----------|
| React コンポーネント | KPICard, CallsTable | Props → レンダリング |
| Custom Hook | useCallDetail, useFilter | 入力 → 状態変化 |
| ユーティリティ関数 | formatDuration, formatDate | 入力 → 出力 |
| API Route ハンドラ | /api/ingest/call | リクエスト → レスポンス |

### 2.2 結合テスト対象

| 対象 | テスト観点 |
|------|-----------|
| ページ + API Route | データ取得 → 画面表示 |
| フィルタ + テーブル | フィルタ条件 → 表示データ変化 |
| ナビゲーション | ページ遷移・URL変化 |

### 2.3 システムテスト対象

| 対象 | テスト観点 |
|------|-----------|
| Dashboard 画面 | KPI 表示・グラフ描画 |
| 発着信履歴 | 一覧表示・フィルタ・ページネーション |
| 通話詳細 | 録音再生・文字起こし・要約表示 |

---

## 3. テスト環境

| コンポーネント | 開発環境 | CI 環境 |
|--------------|---------|---------|
| Node.js | v20+ | v20+ |
| pnpm | v8+ | v8+ |
| PostgreSQL | Docker | Docker |
| ブラウザ（E2E） | Chrome | Chromium（Playwright） |

---

## 4. テストディレクトリ構造

```
test/
├── plan.md              # 本ファイル
├── unit/                # 単体テスト仕様
│   ├── TEMPLATE-UT.md
│   └── UT-xxx.md
├── integration/         # 結合テスト仕様
│   ├── TEMPLATE-IT.md
│   └── IT-xxx.md
└── system/              # システムテスト仕様
    ├── TEMPLATE-ST.md
    └── ST-xxx.md
```

---

## 5. 参照

| ドキュメント | 説明 |
|-------------|------|
| [プロセス定義書](../process/v-model.md) | V字モデル・テストフェーズ定義 |
| [品質ゲート定義](../process/quality-gate.md) | テスト関連ゲート（QG-5〜7） |

---

## 変更履歴

| 日付 | バージョン | 変更内容 | 作成者 |
|------|-----------|---------|--------|
| 2026-02-05 | 1.0 | 初版作成 | Claude Code |
