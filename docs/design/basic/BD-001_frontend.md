# BD-001_frontend

> Frontend ç®¡ç†ç”»é¢ã®åŸºæœ¬è¨­è¨ˆï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ï¼‰

| é …ç›® | å€¤ |
|------|-----|
| ID | BD-001 |
| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | Draft |
| ä½œæˆæ—¥ | 2026-02-02 |
| é–¢é€£Issue | #89 |
| å¯¾å¿œRD | RD-005 |
| å¯¾å¿œIT | - |

---

## 1. æ¦‚è¦

### 1.1 ç›®çš„

Frontend ç®¡ç†ç”»é¢ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆã€ç”»é¢é·ç§»ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã‚’å®šç¾©ã™ã‚‹ã€‚

### 1.2 ã‚¹ã‚³ãƒ¼ãƒ—

- ç”»é¢æ§‹æˆï¼ˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€ãƒšãƒ¼ã‚¸ï¼‰
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²
- ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ï¼ˆBackend â†’ Frontendï¼‰
- çŠ¶æ…‹ç®¡ç†æ–¹é‡

---

## 2. ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### 2.1 å…¨ä½“æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Next.js App                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚  Pages   â”‚  â”‚Componentsâ”‚  â”‚   Server Sync    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ (routes) â”‚  â”‚   (UI)   â”‚  â”‚   (API Routes)   â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚       â”‚             â”‚                  â”‚            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚              Local DB (SQLite/Prisma)        â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚ POST /api/ingest/call
                              â”‚ GET /recordings/{id}
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Backend                               â”‚
â”‚          (SIP/RTP/AI/Recording - Rust)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¸€è¦§

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | è²¬å‹™ | æŠ€è¡“é¸å®š |
|--------------|------|---------|
| Next.js App | SSR/SSG/API Routes | Next.js 14 (App Router) |
| UI Components | ç”»é¢è¡¨ç¤º | React + shadcn/ui |
| Server Sync | Backend ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å—ä¿¡ | Next.js API Routes |
| Local DB | é€šè©±ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ– | SQLite + Prisma |
| State Management | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹ç®¡ç† | React Context / Zustand |

---

## 3. ç”»é¢æ§‹æˆ

### 3.1 ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header (64px)                                [ðŸŒ™] [Avatar] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            â”‚                                                â”‚
â”‚  Sidebar   â”‚              Main Content                      â”‚
â”‚  (240px)   â”‚                                                â”‚
â”‚            â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚                                                â”‚
â”‚  â”‚ Logo  â”‚ â”‚                                                â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”¤ â”‚                                                â”‚
â”‚  â”‚ Nav   â”‚ â”‚                                                â”‚
â”‚  â”‚ Items â”‚ â”‚                                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                                â”‚
â”‚            â”‚                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ãƒšãƒ¼ã‚¸ä¸€è¦§ï¼ˆMVPï¼‰

| ãƒ‘ã‚¹ | ãƒšãƒ¼ã‚¸å | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | èª¬æ˜Ž |
|------|---------|--------------|------|
| `/` | Dashboard | DashboardContent | KPIãƒ»ã‚°ãƒ©ãƒ•è¡¨ç¤º |
| `/calls` | ç™ºç€ä¿¡å±¥æ­´ | CallHistoryContent | é€šè©±ä¸€è¦§ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ |
| `/calls/[id]` | é€šè©±è©³ç´° | CallDetailDrawer | éŒ²éŸ³ãƒ»æ–‡å­—èµ·ã“ã—ãƒ»è¦ç´„ |

### 3.3 å°†æ¥ãƒšãƒ¼ã‚¸ï¼ˆMVPå¯¾è±¡å¤–ï¼‰

| ãƒ‘ã‚¹ | ãƒšãƒ¼ã‚¸å | å‚™è€ƒ |
|------|---------|------|
| `/groups` | ç•ªå·ã‚°ãƒ«ãƒ¼ãƒ— | v0 ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã«ã‚¹ã‚±ãƒ«ãƒˆãƒ³ã‚ã‚Š |
| `/routing` | ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° | åŒä¸Š |
| `/ivr` | IVRãƒ•ãƒ­ãƒ¼ | åŒä¸Š |
| `/schedule` | ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« | åŒä¸Š |
| `/announcements` | ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ | åŒä¸Š |
| `/settings` | è¨­å®š | æœªä½œæˆ |
| `/audit-log` | ç›£æŸ»ãƒ­ã‚° | æœªä½œæˆ |

---

## 4. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ

### 4.1 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ„ãƒªãƒ¼

```
app/
â”œâ”€â”€ layout.tsx              # RootLayout
â”‚   â””â”€â”€ AdminLayout
â”‚       â”œâ”€â”€ AdminHeader
â”‚       â”‚   â”œâ”€â”€ Logo
â”‚       â”‚   â”œâ”€â”€ ThemeToggle
â”‚       â”‚   â””â”€â”€ UserAvatar
â”‚       â””â”€â”€ AdminSidebar
â”‚           â””â”€â”€ NavItems
â”œâ”€â”€ page.tsx                # Dashboard
â”‚   â””â”€â”€ DashboardContent
â”‚       â”œâ”€â”€ KPICards
â”‚       â”‚   â””â”€â”€ KPICard (x4)
â”‚       â””â”€â”€ Charts
â”‚           â””â”€â”€ HourlyCallChart
â””â”€â”€ calls/
    â”œâ”€â”€ page.tsx            # Call History
    â”‚   â””â”€â”€ CallHistoryContent
    â”‚       â”œâ”€â”€ FilterBar
    â”‚       â”œâ”€â”€ CallsTable
    â”‚       â””â”€â”€ Pagination
    â””â”€â”€ [id]/
        â””â”€â”€ CallDetailDrawer
            â”œâ”€â”€ Tabs
            â”‚   â”œâ”€â”€ RecordingTab
            â”‚   â”‚   â””â”€â”€ AudioPlayer
            â”‚   â”œâ”€â”€ TranscriptTab
            â”‚   â”‚   â””â”€â”€ TranscriptView
            â”‚   â””â”€â”€ SummaryTab
            â”‚       â””â”€â”€ SummaryView
            â””â”€â”€ CallMeta
```

### 4.2 å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆui/ï¼‰

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | å‡ºå…¸ | ç”¨é€” |
|--------------|------|------|
| Button | shadcn/ui | ãƒœã‚¿ãƒ³ |
| Card | shadcn/ui | ã‚«ãƒ¼ãƒ‰ |
| Table | shadcn/ui | ãƒ†ãƒ¼ãƒ–ãƒ« |
| Tabs | shadcn/ui | ã‚¿ãƒ–åˆ‡æ›¿ |
| Dialog/Drawer | shadcn/ui | ãƒ¢ãƒ¼ãƒ€ãƒ«/ãƒ‰ãƒ­ãƒ¯ãƒ¼ |
| DatePickerWithRange | shadcn/ui | æ—¥ä»˜ç¯„å›²é¸æŠž |
| Badge | shadcn/ui | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒã‚¸ |

---

## 5. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 5.1 ãƒ‡ãƒ¼ã‚¿å—ä¿¡ãƒ•ãƒ­ãƒ¼

```
Backend                         Frontend
   â”‚                               â”‚
   â”‚  POST /api/ingest/call        â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚  { callId, from, to, ...}     â”‚
   â”‚                               â”‚
   â”‚                         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
   â”‚                         â”‚ API Route â”‚
   â”‚                         â”‚ (ingest)  â”‚
   â”‚                         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â”‚                               â”‚
   â”‚                         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
   â”‚                         â”‚ Local DB  â”‚
   â”‚                         â”‚ (Prisma)  â”‚
   â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ç”»é¢è¡¨ç¤ºãƒ•ãƒ­ãƒ¼

```
User                      Frontend                    Local DB
  â”‚                          â”‚                           â”‚
  â”‚  ã‚¢ã‚¯ã‚»ã‚¹ /calls          â”‚                           â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚                           â”‚
  â”‚                          â”‚  SELECT * FROM calls      â”‚
  â”‚                          â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                          â”‚                           â”‚
  â”‚                          â”‚  [Call data]              â”‚
  â”‚                          â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                          â”‚                           â”‚
  â”‚  <CallHistoryContent>    â”‚                           â”‚
  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                           â”‚
```

### 5.3 éŒ²éŸ³å†ç”Ÿãƒ•ãƒ­ãƒ¼

```
User                      Frontend                    Backend
  â”‚                          â”‚                           â”‚
  â”‚  å†ç”Ÿãƒœã‚¿ãƒ³ ã‚¯ãƒªãƒƒã‚¯       â”‚                           â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚                           â”‚
  â”‚                          â”‚  GET /recordings/{id}     â”‚
  â”‚                          â”‚  Range: bytes=0-          â”‚
  â”‚                          â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                          â”‚                           â”‚
  â”‚                          â”‚  206 Partial Content      â”‚
  â”‚                          â”‚  audio/wav                â”‚
  â”‚                          â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                          â”‚                           â”‚
  â”‚  <AudioPlayer>           â”‚                           â”‚
  â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                           â”‚
```

---

## 6. ãƒ‡ãƒ¼ã‚¿è¨­è¨ˆ

### 6.1 ãƒ­ãƒ¼ã‚«ãƒ« DB ã‚¹ã‚­ãƒ¼ãƒžï¼ˆPrismaï¼‰

```prisma
model Call {
  id          String   @id @default(cuid())
  callId      String   @unique  // Backend ã‹ã‚‰å—ä¿¡
  from        String
  to          String
  startedAt   DateTime
  endedAt     DateTime?
  status      String   // ringing | in_call | ended | error
  summary     String?
  durationSec Int?
  recordingUrl String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  transcript  Transcript?
}

model Transcript {
  id        String   @id @default(cuid())
  callId    String   @unique
  call      Call     @relation(fields: [callId], references: [callId])
  rawData   String   // ãƒ™ãƒ³ãƒ€ãƒ¼å‡ºåŠ›ï¼ˆJSONï¼‰
  normalized String  // UIç”¨æ­£è¦åŒ– JSON
  srt       String?  // SRTå½¢å¼
  vtt       String?  // VTTå½¢å¼
  createdAt DateTime @default(now())
}
```

### 6.2 ä¸»è¦ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

| ãƒ‡ãƒ¼ã‚¿ | å½¢å¼ | æ ¼ç´å…ˆ | èª¬æ˜Ž |
|--------|------|--------|------|
| Call | JSON â†’ DB | Local DB | é€šè©±ãƒ¡ã‚¿æƒ…å ± |
| Transcript | JSONï¼ˆ3ç¨®ï¼‰ | Local DB | æ–‡å­—èµ·ã“ã— |
| Recording | WAV | Backend (S3ç­‰) | éŒ²éŸ³ãƒ•ã‚¡ã‚¤ãƒ«æœ¬ä½“ |
| KPI | JSON | Backend API | Dashboard é›†è¨ˆå€¤ |

---

## 7. API è¨­è¨ˆ

### 7.1 IF-001: é€šè©±ãƒ‡ãƒ¼ã‚¿å—ä¿¡ï¼ˆBackend â†’ Frontendï¼‰

| é …ç›® | å†…å®¹ |
|------|------|
| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | `POST /api/ingest/call` |
| å‘¼å‡ºå…ƒ | Backend |
| å‘¼å‡ºå…ˆ | Frontend API Route |
| ãƒ—ãƒ­ãƒˆã‚³ãƒ« | HTTP |
| åŒæœŸ/éžåŒæœŸ | åŒæœŸ |

#### ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆcontract.md æº–æ‹ ï¼‰

```json
{
  "callId": "c_123",
  "from": "sip:zoiper@example",
  "to": "sip:bot@example",
  "startedAt": "2025-12-13T00:00:00.000Z",
  "endedAt": "2025-12-13T00:05:00.000Z",
  "status": "ended",
  "summary": "é…é€çŠ¶æ³ã®ç¢ºèªã€‚ä½æ‰€å¤‰æ›´ã‚ã‚Šã€‚",
  "durationSec": 300,
  "recording": {
    "recordingUrl": "https://backend.example/recordings/c_123/mixed.wav",
    "durationSec": 300,
    "sampleRate": 8000,
    "channels": 1
  }
}
```

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹

```json
{
  "success": true,
  "callId": "c_123"
}
```

#### ã‚¨ãƒ©ãƒ¼

| ã‚³ãƒ¼ãƒ‰ | æ„å‘³ | å¯¾å‡¦ |
|--------|------|------|
| 400 | ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¸æ­£ | ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰æ¤œè¨¼ |
| 500 | å†…éƒ¨ã‚¨ãƒ©ãƒ¼ | ãƒ­ã‚°ç¢ºèªãƒ»ãƒªãƒˆãƒ©ã‚¤ |

### 7.2 IF-002: KPI å–å¾—ï¼ˆFrontend â†’ Backendï¼‰

| é …ç›® | å†…å®¹ |
|------|------|
| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | `GET /api/kpi` |
| å‘¼å‡ºå…ƒ | Frontend |
| å‘¼å‡ºå…ˆ | Backend |
| ãƒ—ãƒ­ãƒˆã‚³ãƒ« | HTTP |
| åŒæœŸ/éžåŒæœŸ | åŒæœŸ |

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹

```json
{
  "totalCalls": 142,
  "avgDurationSec": 154,
  "answerRate": 0.87,
  "hourlyVolume": [
    { "hour": 0, "inbound": 2, "outbound": 0 },
    { "hour": 1, "inbound": 1, "outbound": 0 },
    ...
  ]
}
```

---

## 8. çŠ¶æ…‹ç®¡ç†

### 8.1 æ–¹é‡

| ç¨®åˆ¥ | ç®¡ç†æ–¹æ³• | ä¾‹ |
|------|---------|-----|
| ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ | Prisma + React Query | Call ä¸€è¦§ã€KPI |
| UI çŠ¶æ…‹ | React Context | ã‚µã‚¤ãƒ‰ãƒãƒ¼é–‹é–‰ã€ãƒ†ãƒ¼ãƒž |
| ãƒ•ã‚©ãƒ¼ãƒ çŠ¶æ…‹ | React Hook Form | ãƒ•ã‚£ãƒ«ã‚¿æ¡ä»¶ |

### 8.2 ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

| ãƒ‡ãƒ¼ã‚¿ | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | æ›´æ–°ã‚¿ã‚¤ãƒŸãƒ³ã‚° |
|--------|-----------|--------------|
| Call ä¸€è¦§ | stale-while-revalidate | ãƒšãƒ¼ã‚¸é·ç§»æ™‚ |
| KPI | 1åˆ† TTL | å®šæœŸ refetch |
| éŒ²éŸ³ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | immutable |

---

## 9. éžæ©Ÿèƒ½è¨­è¨ˆæ–¹é‡

### 9.1 æ€§èƒ½

| é …ç›® | æ–¹é‡ |
|------|------|
| åˆå›žè¡¨ç¤º | SSR + Streaming |
| ä¸€è¦§è¡¨ç¤º | ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆå¤§é‡ãƒ‡ãƒ¼ã‚¿æ™‚ï¼‰ |
| éŸ³å£°å†ç”Ÿ | Range ãƒªã‚¯ã‚¨ã‚¹ãƒˆå¯¾å¿œ |

### 9.2 å¯ç”¨æ€§

| é …ç›® | æ–¹é‡ |
|------|------|
| ã‚¨ãƒ©ãƒ¼å¢ƒç•Œ | React Error Boundary |
| ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ | ãƒ­ãƒ¼ã‚«ãƒ« DB ã‹ã‚‰ã®è¡¨ç¤º |

### 9.3 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

| é …ç›® | æ–¹é‡ |
|------|------|
| èªè¨¼ï¼ˆMVPï¼‰ | ãªã—ï¼ˆé–‰åŸŸæƒ³å®šï¼‰ |
| èªè¨¼ï¼ˆå°†æ¥ï¼‰ | NextAuth.js + JWT |
| XSS å¯¾ç­– | React æ¨™æº–ã‚¨ã‚¹ã‚±ãƒ¼ãƒ— |

---

## 10. å‰ææ¡ä»¶ãƒ»åˆ¶ç´„

### 10.1 å‰ææ¡ä»¶

- Backend ãŒ `POST /api/ingest/call` ã§é€šè©±ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹
- éŒ²éŸ³ãƒ•ã‚¡ã‚¤ãƒ«ã¯ Backend ã‹ã‚‰ç›´æŽ¥é…ä¿¡ï¼ˆRange å¯¾å¿œï¼‰
- KPI ã¯ Backend ãŒé›†è¨ˆã—ã¦ API æä¾›

### 10.2 åˆ¶ç´„

- MVP ã§ã¯èªè¨¼ãªã—
- v0 ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’ãƒ™ãƒ¼ã‚¹ã«å®Ÿè£…
- pnpm + Next.js 14 App Router

---

## 11. æœªç¢ºå®šäº‹é …ï¼ˆOpen Questionsï¼‰

- [x] Q1: ~~æ–‡å­—èµ·ã“ã—ãƒ‡ãƒ¼ã‚¿ã®å½¢å¼~~ â†’ RD-005 ã§è§£æ±ºï¼ˆ3ç‚¹ã‚»ãƒƒãƒˆï¼‰
- [x] Q2: ~~KPI é›†è¨ˆæ–¹æ³•~~ â†’ RD-005 ã§è§£æ±ºï¼ˆBackend é›†è¨ˆï¼‰
- [ ] Q3: KPI API ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè©³ç´°ï¼ˆcontract.md ã«è¿½è¨˜è¦ï¼‰
- [ ] Q4: Transcript APIï¼ˆæ–‡å­—èµ·ã“ã—ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•ï¼‰

---

## 12. ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—å‚ç…§

| é …ç›® | å€¤ |
|------|-----|
| GitHub | [MasanoriSuda/telephony-admin-prototype](https://github.com/MasanoriSuda/telephony-admin-prototype) |
| å®Ÿè£…æ¸ˆã¿ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | admin-layout, admin-sidebar, admin-header, dashboard-content, call-history-content, call-detail-drawer, audio-player ç­‰ |

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ | ä½œæˆè€… |
|------|-----------|---------|--------|
| 2026-02-02 | 1.0 | åˆç‰ˆä½œæˆ | Claude Code |
