# Review: Issue #8 - アーキテクチャ改善計画 (PLAN.md)

**日付**: 2025-12-30
**レビュアー**: Codex
**対象**: `virtual-voicebot-backend/docs/impl/PLAN.md`

---

## 指摘事項

### 中: ARCH-01〜05 が Plan 原則と不整合

**根拠**: PLAN.md:21-25, 127-194

ARCH-01〜05 が実施項目として追加された一方で、Plan の「Spec変更が必要なものは Deferred Steps へ分離」「各 Step に DoD」ルールに沿った配置/DoD がなく、運用ルールと整合していません。

**対応**:
```diff
 ## Architecture Improvements（アーキテクチャ改善）

+> ※設計/仕様変更を伴うため、各 ARCH は Spec 策定後に Step 化（Deferred Steps 扱い）する。
```

### 軽: ARCH-01/05 の対象ファイル記載が不足

**根拠**: PLAN.md:140-190

ARCH-01/05 の対象ファイルが外部I/O・設定依存の実体とズレており、スコープ誤認の恐れがあります。

**対応**:
```diff
-**対象ファイル**: `src/ai/mod.rs`, `src/ai/*.rs`, `src/session/session.rs`
+**対象ファイル**: `src/ai/mod.rs`, `src/ai/*.rs`, `src/http/mod.rs`, `src/recording/mod.rs`, `src/session/session.rs`
```

```diff
-**対象ファイル**: `src/config.rs`, `src/sip/mod.rs`, `src/main.rs`
+**対象ファイル**: `src/config.rs`, `src/sip/mod.rs`, `src/main.rs`, `src/ai/*.rs`
```

---

## Open Question

ARCH-01〜05 はこのままエピック扱いで、後日 Step 化する前提で良いですか？

**回答**: Yes - Deferred Steps 扱いとして注記を追加済み。Spec 策定後に個別 Step 化する。

---

## PR 本文要約

- 中: ARCH-01〜05 が Deferred/Step 化されておらず Plan 原則と不整合（PLAN.md:21-25, 127-194）
- 軽: ARCH-01/05 の対象ファイル記載が不足（PLAN.md:140-190）
