# Review: Issue #95 (2026-02-04)

## Summary
重大 1件 / 中 1件 / 軽 1件。
実行コマンド: `cargo check -q`（警告のみ）。

## 重大
1. `rtp` 層が `session` に依存しており依存方向違反。
根拠: `src/rtp/rx.rs:19-36` `src/transport/packet.rs:15-108`（`RtpReceiver` が `SessionRegistry` を保持し `SessionIn` を送信）。
最小差分案: `ports/rtp.rs` にメディア受信 Port を定義し、`rtp` は Port にのみ依存させる。
```rust
// ports/rtp.rs
pub trait RtpMediaSink: Send + Sync {
    fn on_rtp(&self, call_id: &CallId, ts: u32, payload: Vec<u8>);
    fn on_dtmf(&self, call_id: &CallId, digit: char);
}
```

## 中
1. `RtpTxHandle::start/stop` が `try_send` 失敗で drop されると RTP 開始/停止が失敗し得る。
根拠: `src/rtp/tx.rs:50-68`。
最小差分案: `start/stop` のみ `send().await` に変更し確実送信する（payload は従来通り drop 可）。

## 軽
1. `RtpReceiver` のコメントが「destination port で紐付け」となっており実装と不一致。
根拠: `src/rtp/rx.rs:63-66`。
最小差分案: コメントを source address 参照に修正。

## Test Gaps
1. RTP CSRC/extension parse/build のユニットテストが未追加。
2. `rtp_port_map` の更新・解除（INVITE/REINVITE/STOP）に関する回帰テストが未追加。
