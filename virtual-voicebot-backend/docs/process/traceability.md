# トレーサビリティマトリクス（TM）

> 要件 ↔ 設計 ↔ テストの対応関係を管理する

| 項目 | 値 |
|------|-----|
| ステータス | Draft |
| 作成日 | 2026-01-31 |
| 関連Issue | #69 |

---

## 1. 概要

### 1.1 目的

本ドキュメントは、V字モデルにおける成果物間のトレーサビリティ（追跡可能性）を管理する。

- 要件が設計・テストに漏れなく反映されているか確認
- 変更影響範囲の特定
- テストカバレッジの可視化

### 1.2 トレーサビリティの構造

```
【縦のトレース：設計の詳細化】
RD（要件）
  ↓ 分解
BD（基本設計）
  ↓ 詳細化
DD（詳細設計）

【横のトレース：設計↔テスト】
RD ←────→ ST（システムテスト）
BD ←────→ IT（結合テスト）
DD ←────→ UT（単体テスト）
```

---

## 2. マトリクス：要件 → 設計

| RD ID | 要件名 | BD ID | DD ID | カバー状況 |
|-------|--------|-------|-------|-----------|
| RD-001 | プロダクト要求仕様 | BD-001, BD-002 | DD-001〜DD-007 | 設計済み |
| RD-002 | MVP定義 | BD-001 | DD-002 | 設計済み |
| RD-003 | ボイスボットフロー | BD-002 | DD-005, DD-006 | 設計済み |

---

## 3. マトリクス：設計 → テスト

### 3.1 RD ↔ ST（要件 ↔ システムテスト）

| RD ID | 要件名 | ST ID | テスト状況 | 備考 |
|-------|--------|-------|-----------|------|
| RD-001 | プロダクト要求仕様 | ST-001 | 定義済み | 受入条件あり |
| RD-002 | MVP定義 | ST-001 | 定義済み | MVP受入条件 |
| RD-003 | ボイスボットフロー | ST-002 | 定義済み | E2Eテスト |

### 3.2 BD ↔ IT（基本設計 ↔ 結合テスト）

| BD ID | 設計名 | IT ID | テスト状況 | 備考 |
|-------|--------|-------|-----------|------|
| BD-001 | システムアーキテクチャ | - | 未定義 | IT仕様作成要 |
| BD-002 | App層設計 | - | 未定義 | IT仕様作成要 |

### 3.3 DD ↔ UT（詳細設計 ↔ 単体テスト）

| DD ID | 設計名 | UT ID | テスト状況 | 備考 |
|-------|--------|-------|-----------|------|
| DD-001 | 技術スタック | - | N/A | テスト不要 |
| DD-002 | モジュール設計 | - | 未定義 | UT仕様作成要 |
| DD-003 | SIPモジュール | - | 未定義 | UT仕様作成要 |
| DD-004 | RTPモジュール | - | 未定義 | UT仕様作成要 |
| DD-005 | Sessionモジュール | - | 未定義 | UT仕様作成要 |
| DD-006 | AIモジュール | - | 未定義 | UT仕様作成要 |
| DD-007 | Recordingモジュール | - | 未定義 | UT仕様作成要 |

---

## 4. カバレッジサマリ

### 4.1 要件カバレッジ

| 指標 | 値 | 目標 |
|------|-----|------|
| 総要件数 | 3 | - |
| 設計済み | 3 (100%) | 100% |
| テスト定義済み | 3 (100%) | 100% |
| テスト実行済み | 0 (0%) | 100% |

### 4.2 設計カバレッジ

| 指標 | BD | DD |
|------|-----|-----|
| 総数 | 2 | 7 |
| テスト定義済み | 0 (0%) | 0 (0%) |
| テスト実行済み | 0 (0%) | 0 (0%) |

---

## 5. 未カバー項目（Gap）

### 5.1 設計未定義の要件

| RD ID | 要件名 | 理由 | 対応予定 |
|-------|--------|------|---------|
| - | （なし） | - | - |

### 5.2 テスト未定義の設計

| ID | 設計名 | 理由 | 対応予定 |
|----|--------|------|---------|
| BD-001 | システムアーキテクチャ | IT仕様未作成 | 要作成 |
| BD-002 | App層設計 | IT仕様未作成 | 要作成 |
| DD-002〜DD-007 | 各モジュール設計 | UT仕様未作成 | 要作成 |

---

## 6. 運用ルール

### 6.1 更新タイミング

| イベント | 更新内容 |
|---------|---------|
| RD 作成/更新 | §2, §3.1, §4 を更新 |
| BD 作成/更新 | §2, §3.2, §4 を更新 |
| DD 作成/更新 | §2, §3.3, §4 を更新 |
| テスト仕様作成 | §3, §4 を更新 |
| テスト実行 | §4 を更新 |

### 6.2 責任者

| 役割 | 責務 |
|------|------|
| 仕様作成者 | 作成時にマトリクスを更新 |
| レビュアー | トレーサビリティの確認 |
| PL | カバレッジの監視 |

### 6.3 品質ゲートとの関連

| ゲート | トレーサビリティ要件 |
|--------|---------------------|
| QG-1（RD→BD移行） | RD が全て BD にマッピングされていること |
| QG-2（BD→DD移行） | BD が全て DD にマッピングされていること |
| QG-4（UT完了） | DD が全て UT にマッピングされていること |
| QG-5（IT完了） | BD が全て IT にマッピングされていること |
| QG-6（ST完了） | RD が全て ST にマッピングされていること |

---

## 7. 参照

- [プロセス定義書](v-model.md) - V字モデル定義
- [品質ゲート定義](quality-gate.md) - フェーズ移行条件
- [要件仕様書インデックス](../requirements/index.md)
- [設計書インデックス](../design/index.md)
- [テスト計画書](../test/plan.md)

---

## 変更履歴

| 日付 | バージョン | 変更内容 | 作成者 |
|------|-----------|---------|--------|
| 2026-01-31 | 1.0 | 初版作成（スケルトン） | @MasanoriSuda + Claude Code |
| 2026-01-31 | 1.1 | 既存ドキュメント移行反映 | @MasanoriSuda + Claude Code |
