# ai モジュール詳細設計（asr / llm / tts）

## 1. 共通方針
- すべて「外部サービスのラッパー」として実装する
- ネットワーク再試行ポリシー、タイムアウトの基本値

## 2. ASR (ai::asr)
- 入力: PCMフォーマット・チャンクサイズ・ストリーミング単位
- 出力: partial/final のどちらを扱うか
- エラー種別と app への通知方法

## 3. LLM (ai::llm)
- 入力: プロンプト構成（履歴＋ユーザ発話＋システムメッセージ）
- 出力: 応答テキスト＋メタ情報（終了フラグ/アクションタグなど）
- トークン数・タイムアウト・リトライのポリシー

## 4. TTS (ai::tts)
- 入力: テキスト + オプション（話者/速度）※MVPでどこまでやるか
- 出力: PCM チャンクのサイズ / ストリーミング方法
- エラー時にどう知らせるか

## 5. app から見た I/F まとめ
- app→ai のリクエスト型一覧
- ai→app のレスポンス/イベント型一覧
- キャンセル（通話終了時に ASR/TTS ストリームをどう閉じるか）
