# app モジュール

目的・責務
- 対話状態管理とイベント分配のハブ。
- session からの通話イベント・音声入力を受け取り、ai::{asr,llm,tts} を呼び出して応答を組み立て、session に指示を返す。
- 対話履歴・ポリシーに基づく LLM プロンプト構築とエラーポリシー適用。

他モジュールとの関係
- session: Call開始/終了/音声入力イベントを受け取り、BotAudio や終了指示を返す。
- ai::{asr,llm,tts}: ASR/LLM/TTS を非同期に呼び出し、結果を受け取る。
- transport/rtp/sip: 直接依存しない（session 経由）。

注意事項
- 生UDP/RTP/SIPには触れない。
- AIサービスの呼び出し詳細は ai モジュールに委譲する。
- 状態はセッション単位で管理し、session 側の状態管理と混在させない。
