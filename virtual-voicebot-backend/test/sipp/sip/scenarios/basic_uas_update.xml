<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE scenario SYSTEM "sipp.dtd">
<scenario name="basic_uas_invite_update_bye">
  <send retrans="500">
    <![CDATA[
INVITE sip:service@[remote_ip]:[remote_port] SIP/2.0
Via: SIP/2.0/UDP [local_ip]:[local_port];branch=z9hG4bK-[call_number]
From: <sip:uac@[local_ip]>;tag=[call_number]
To: <sip:uas@[remote_ip]>
Call-ID: [call_id]
CSeq: 1 INVITE
Contact: <sip:uac@[local_ip]:[local_port]>
Max-Forwards: 70
Supported: timer
Session-Expires: 120;refresher=uac
Min-SE: 90
Subject: SIPp update UAC
Content-Type: application/sdp
Content-Length: [len]

v=0
o=- 0 0 IN IP4 [local_ip]
s=-
c=IN IP4 [local_ip]
t=0 0
m=audio [media_port] RTP/AVP 0
a=rtpmap:0 PCMU/8000
    ]]>
  </send>

  <recv response="100" optional="true"/>
  <recv response="180" optional="true"/>
  <recv response="200" rtd="true">
    <action>
      <ereg regexp="Session-Expires: *120" search_in="msg" check_it="true"/>
    </action>
  </recv>

  <send>
    <![CDATA[
ACK sip:service@[remote_ip]:[remote_port] SIP/2.0
Via: SIP/2.0/UDP [local_ip]:[local_port];branch=z9hG4bK-[call_number]
From: [last_From]
To: [last_To]
Call-ID: [call_id]
CSeq: 1 ACK
Contact: <sip:uac@[local_ip]:[local_port]>
Max-Forwards: 70
Content-Length: 0

    ]]>
  </send>

  <pause milliseconds="300"/>

  <send>
    <![CDATA[
UPDATE sip:service@[remote_ip]:[remote_port] SIP/2.0
Via: SIP/2.0/UDP [local_ip]:[local_port];branch=z9hG4bK-[call_number]
From: [last_From]
To: [last_To]
Call-ID: [call_id]
CSeq: 2 UPDATE
Contact: <sip:uac@[local_ip]:[local_port]>
Max-Forwards: 70
Supported: timer
Session-Expires: 120;refresher=uac
Min-SE: 90
Content-Length: 0

    ]]>
  </send>

  <recv response="200">
    <action>
      <ereg regexp="Session-Expires: *120" search_in="msg" check_it="true"/>
    </action>
  </recv>

  <pause milliseconds="300"/>

  <send>
    <![CDATA[
BYE sip:service@[remote_ip]:[remote_port] SIP/2.0
Via: SIP/2.0/UDP [local_ip]:[local_port];branch=z9hG4bK-[call_number]
From: [last_From]
To: [last_To]
Call-ID: [call_id]
CSeq: 3 BYE
Contact: <sip:uac@[local_ip]:[local_port]>
Max-Forwards: 70
Content-Length: 0

    ]]>
  </send>

  <recv response="200"/>
</scenario>
