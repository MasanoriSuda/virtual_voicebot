# はじめに
本ドキュメントは人間向けドキュメントである。　

# テスト仕様書の作成
1.入力となるテストベース(ドキュメント、ソースコード)を準備する
2.テストベースからの仕様把握、目的、テストアイテムの明確化
3.テスト観点、テスト条件の抽出
4.テストケース(概要)の作成
5.テストケース(詳細)の作成
6.テスト仕様書の最終レビューと整合性確認

## 入力となるテストベースの準備
- 要求仕様書
- 基本設計書/詳細設計書
- ソースコード
- 過去の障害票
ドキュメントはMarkdown形式やPlantUML形式へ変換することを推奨。


## 仕様把握、テスト目的の明確化
```
- 仕様を要約しテスト範囲、目的を明確化
- テスト相手を抽出し、ITEM-XXXXでID付与
- 要求・非機能要求・リスクを抽出し、REQ/NF/RISK-XXX形式でID付与
- 不明点は「不明」と記録、後日確認
    - テストアイテム一覧(ITEM-XXX,名称/範囲)
    - 要求、リスク一覧(REQ/NF/RISK-XXX,名称,概要)
    - テスト目的、完了基準(箇条書き可)
- 出力は後工程でのID管理、差分チェックに使用
- 入力：仕様書、既存リスク資料、非機能要求、プロジェクト計画（納期、予算等）
```

## テスト観点、テスト条件の抽出
```
- ITEM/REQ/RISKを参照し、正常/異常/境界値/非機能要件等のテスト観点を洗い出して連番(ID-XXX)付与
- 全要求・リスクが観点と紐付いているかAIでチェックする
- 観点が多い場合はITEM単位で分割後、統合
- 出力形式：観点ID|ITEM-ID}REQ|RISK-ID|観点概要
    - 例:C-001|REQ-001|入力バリデーション
- 差分チェック例：「Step1の要求、リスクID、:REQ-0001、NF-001、RISK-001/ID:C-001,C-002…未対応は？」
- 入力：Step1 出力 (テストアイテム/要求/リスク一覧)、詳細仕様書（数値制限、業務フロー等）
```

## テストケースの作成
- 前Stepの観点(C-XXX)を操作レベルのテストケース（概要）に整理し、連番ID(G-XXX)を付与
- 各ケースがカバーする観点ID(C-XXX)とITEM-XXXを明示
- 概要は「パスワードを入力する」等、詳細データは記載不要
- 観点が多ければ分割後、AIで未カバー観点を差分チェック
- 出力例:G-001|C-001|ITEM-001|パスワード桁数のエラー表示|優先度:高
- 差分チェック例：「観点 C-001,C-002,…/テストケースG-001,G-002、…、未カバーの観点は？」
- 入力：Step2のテストケース(C-XXX)、テスト担当者ヒアリング情報(操作レベルの想定)

## テストケースの定義
```
- テストケース (概要)(G-XXX)を、前提、操作手順、入力、期痛い結果、優先度を含む詳細ケース(D-XXX)として具体化。
- D-XXXは連番で付与し、対応するG-XXXを明示(1つのG-XXXに複数の D=XXX 可)
- ケースが多ければ分割生成後、AIで見詳細化のG-XXXを差分チェック
- 出力例：D-001|G-001|前提：ログイン画面|操作：パス4文字入力->送信|入力：abcd|期待結果:正常ログイン|優先度:高
- 差分チェック例：「テストケース(概要)：G-001、G-002、…/テストケース(詳細):D-001,D-002,…、未展開G-XXXは？」
- 入力：Step3のテストケース(概要)(G-XXX),詳細仕様書(UI、API・DB仕様等)
```

## 最終レビューと整合性確認
'''
- STEP1〜4の成果物(ITEM/REQ/RISK/C/G/Dの各ID)を「テスト仕様書」として章立てでまとめる
- 構成例：①はじめに、②テストアイテム・要求/リスク一覧、③観点一覧、④ケース(概要)、⑤ケース(詳細)、⑥トレーサビリティ(REQ->C->G->D)、⑦指摘・修正履歴
- 全REQ/RISKが最終的に詳細ケース(D-XXX)まで到達しているか、AIで差分チェック
- 指摘があればStep2〜4を再生成し、最終レビュー後にテスト実行へ移行
- 差分チェック例：「要求/リスク一覧 vs 詳細ケース一覧で未カバーIDは？」
- 入力：Step1-4の成果物(ID付き一覧)、レビュー指摘事項・追加要求
'''

# テストコード生成
## コードの理解と要約
```
[背景]与えられたRustコードの内容を理解し、次のステップで網羅的なテストケースを作るために必要な情報を整理する。
[目的]対象コードの目的、動作、特に重要な処理内容やエッジケースを正確に把握する
[指示]
- 与えられたコードを解析し、関数やクラスが何を目的としているのかを明確に記述すること
- 特に条件分岐、ループ、例外処理などの挙動に注目して、要約すること。
- 入力と出力の関係を明確に説明すること。
- 不明確な点や推測が含まれる場合は、その旨を記載すること。
[出力形式]
```
- 役割・処理内容：<簡潔な説明>
- 入出力：<説明>
- 特殊な挙動・エッジケース：<説明>
- 推測箇所(あれば):<説明>
```
[ユーザー入力]
- Rustのコード
```

## テストケースの網羅的な列挙
```
[背景]あなたは対象コードの意図を理解し、pysippでユニットテストを作成するためのテストケースを検討しています
[目的]テスト仕様書の情報も参照しながら、対象コードに対してテストスべきケースを網羅的に洗い出す
[指示]
- 正常系、異常系(例外ケース)、境界値など、あらゆるケースを検討すること
- 抵抗されたテスト仕様書の情報がある場合は必ず参考にし、該当ケースに明示すること
- テスト仕様書に記載のないケースで必要と思われることを提案すること
[出力形式]
```
- 正常系：
    - ケース1:<説明> 
- 異常系・エッジケース：
    - ケース2:<説明>
```
[ユーザ入力]
- 前ステップのコード要約結果
- テスト仕様書
```

## テストコードの生成
```
[背景]これまで整理したテストケースの情報をもとに、pysippを用いて網羅的なユニットコードを作成します
[目的]pysippでテスト可能な網羅性の高いユニットテストコードを生成する。
[指示]
- 前ステップのテストケースを全てカバーすること
- 同種のテストはxxx.tomlを用いて簡潔に記述すること
- 例外テストはxxxを用いること
- テスト関数名は目的が明確になるようにつけること
[出力形式]
```
ここに書く
```
[ユーザ入力]
- ステップ2のテストケース
- 対象コードのシグネチャ

```