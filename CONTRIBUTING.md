# Contributing

## Scope and PR size
- 1 PR = 1 purpose（単一目的）
- 目的外のリファクタ/整形/命名変更はしない（必要なら別PR）
- PRが大きくなる場合は分割する（目安: 200〜400 LOC / 5〜10 files）
- README系ファイルは `README.md` の表記に統一する（`Readme.md` は使わない）

## Workflow
1. Issue/チケットに紐付ける（なければPR本文に背景を書く）
2. Plan（影響範囲・代替案・リスク）をPR本文に書く（小さい変更なら箇条書きでOK）
3. 実装
4. `make ci`（またはプロジェクトが定めた `just ci`）を通す
5. PR作成（テンプレに従う）

## Definition of Done (DoD)
- CIがすべて成功している
- 変更理由（Why）と方法（How）がPR本文で説明されている
- 変更に対応するテストがある（またはテスト不要の理由が明記されている）
- セキュリティ/互換性/データ破壊のリスクがある場合、影響と対策が書かれている

## Review
- CODEOWNERSが指定する領域は、必須レビュアーの承認が必要
- レビューでは以下を重視する:
  - 仕様/境界条件/エラーハンドリングが妥当か
  - 可読性（説明可能か）
  - テストが変更をカバーしているか
  - 互換性・セキュリティ・データ安全性

## Breaking changes
以下は「設計メモ（ADRなど）→実装PR」の順を推奨:
- 公開API変更（Rustのpub API / Cの公開ヘッダ / Pythonの公開関数）
- 設定ファイル仕様の変更
- データスキーマ変更・移行が必要な変更
- FFI境界（C↔Rust、Rust↔Pythonバインディング）の互換性変更

## AI-assisted development (optional tools)
Claude Code / Copilot / Codex などの利用は自由ですが、成果物は同じ基準でレビューします。
- PR本文に、何をAIに任せたか（例: テスト生成、リファクタ）を1〜2行で書く
- 不明瞭なコード/説明不能な抽象化は差し戻し対象です
- 原則、テスト実行は人間が行い、AIは自動でテストを走らせない（必要時は明示依頼に従う）
